---
permalink: volumes/move-volume-task.html 
sidebar: sidebar 
keywords: move, volume 
summary: 'Mova um FlexVol volume para um agregado, nó ou ambos diferentes na mesma máquina virtual de storage (SVM) para equilibrar a capacidade de storage.' 
---
= Mover um volume ONTAP
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Você pode mover um FlexVol volume para um agregado, nó ou ambos diferentes na mesma máquina virtual de storage (SVM) para equilibrar a capacidade de storage depois de determinar que há um desequilíbrio de capacidade de storage.

.Sobre esta tarefa
Por padrão, se a operação de transição não for concluída dentro de 30 segundos, ela tentará novamente. Você pode ajustar o comportamento padrão usando os `-cutover-window` parâmetros e `-cutover-action`, que exigem acesso avançado ao nível de privilégio.

Você deve ser um administrador de cluster para executar esta tarefa.

.Antes de começar
* Se você estiver movendo um volume que usa compactação adaptável de 8K para uma das seguintes plataformas, você develink:increase-volume-active-file-system-size.html["aumentar o tamanho do sistema de arquivos ativo do volume"] antes de mover o volume.  Os dados são compactados de forma diferente nessas plataformas para que o espaço seja economizado no nível agregado em vez do nível de volume.  Devido a essa diferença, o tamanho do sistema de arquivos ativo do volume deve ser aumentado na quantidade de economia de compactação de 8k para evitar que o volume fique sem espaço durante a movimentação do volume.
+
** Plataformas AFF e FAS que oferecem suporte à eficiência de armazenamento do processador de offload dedicado
+
Saiba mais sobre as plataformas AFF e FAS que oferecem suportelink:../concepts/builtin-storage-efficiency-concept.html["eficiência de armazenamento do processador de descarregamento dedicado"] .

** Plataformas AFF Série C
+
Veja olink:https://hwu.netapp.com/["Hardware Universe"^] para uma lista completa de plataformas da série C.



* Se você estiver movendo um espelho de proteção de dados e não tiver inicializado o relacionamento do espelho, use o `snapmirror initialize` comando para inicializar o relacionamento de espelho. Saiba mais sobre  `snapmirror initialize` no link:https://docs.netapp.com/us-en/ontap-cli/snapmirror-initialize.html["Referência do comando ONTAP"^] .
+
As relações de espelho de proteção de dados devem ser inicializadas antes de poder mover um dos volumes.



.Passos
. Determine um agregado para o qual você pode mover o volume:
+
[source, cli]
----
volume move target-aggr show
----
+
O agregado que você selecionar deve ter espaço suficiente para o volume; ou seja, o tamanho disponível é maior do que o volume que você está movendo.

+
O exemplo a seguir mostra que o volume VS2 pode ser movido para qualquer um dos agregados listados:

+
[listing]
----
cluster1::> volume move target-aggr show -vserver vs2 -volume user_max
Aggregate Name   Available Size   Storage Type
--------------   --------------   ------------
aggr2            467.9GB          hdd
node12a_aggr3    10.34GB          hdd
node12a_aggr2    10.36GB          hdd
node12a_aggr1    10.36GB          hdd
node12a_aggr4    10.36GB          hdd
5 entries were displayed.
----
+
Saiba mais sobre `volume move target-aggr show` o link:https://docs.netapp.com/us-en/ontap-cli/volume-move-target-aggr-show.html["Referência do comando ONTAP"^]na .

. Execute uma verificação de validação para verificar se o volume pode ser movido para o agregado pretendido:
+
[source, cli]
----
volume move start -perform-validation-only
----
+
Saiba mais sobre `volume move start` o link:https://docs.netapp.com/us-en/ontap-cli/volume-move-start.html["Referência do comando ONTAP"^]na .

. Mover o volume:
+
[source, cli]
----
volume move start
----
+
O comando a seguir move o volume user_Max no SVM VS2 para o agregado node12a_aggr3. O movimento é executado como um processo em segundo plano.

+
[listing]
----
cluster1::> volume move start -vserver vs2 -volume user_max
-destination-aggregate node12a_aggr3
----
. Determinar o status da operação de movimentação de volume:
+
[source, cli]
----
volume move show
----
+
O exemplo a seguir mostra o estado de uma movimentação de volume que concluiu a fase de replicação e está na fase de transição:

+
[listing]
----

cluster1::> volume move show
Vserver   Volume     State    Move Phase  Percent-Complete Time-To-Complete
--------- ---------- -------- ----------  ---------------- ----------------
vs2       user_max   healthy  cutover     -                -
----
+
A movimentação do volume está concluída quando não aparece mais na `volume move show` saída do comando.

+
Saiba mais sobre `volume move show` o link:https://docs.netapp.com/us-en/ontap-cli/volume-move-show.html["Referência do comando ONTAP"^]na .

. Opcionalmente, visualize a economia de compactação:
+
[source, cli]
----
volume show-footprint -vserver <SVM> -volume <volume_name>
----
+

NOTE: Economias adicionais no nível agregado podem ser obtidas por meio de uma verificação de conversão pós-processo que é executada automaticamente e logo após a conclusão da movimentação do volume.



.Informações relacionadas
* link:recommendations-moving-concept.html["Considerações e recomendações ao mover volumes"]

