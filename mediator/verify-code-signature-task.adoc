---
permalink: mediator/verify-code-signature-task.html 
sidebar: sidebar 
keywords: mediator, new, release, update, install, verify, code, signature 
summary: Você deve verificar a assinatura do código do ONTAP Mediator antes de instalar o pacote de instalação do Mediator. 
---
= Verifique a assinatura do código do ONTAP Mediator
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
A NetApp recomenda verificar a assinatura de código do ONTAP Mediator antes da instalação. Esta etapa é opcional.

.Antes de começar
Certifique-se de que seu sistema atenda a esses requisitos antes de verificar a assinatura de código do ONTAP Mediator.

[NOTE]
====
* A partir de 15 de junho de 2025, você não poderá instalar ou atualizar para o ONTAP Mediator 1.9 e 1.8 porque os certificados de verificação de assinatura de código expiraram. Em vez disso, instale ou atualize para o ONTAP Mediator 1.11 ou 1.10.
* Se o sistema não atender aos requisitos abaixo, o processo de verificação não é necessário e você pode ir diretamente para link:install-mediator-pkg-task.html["Instale o pacote de instalação do Mediador ONTAP"].


====
* openssl versões 1.0.2 a 3,0 para verificação básica
* openssl versão 1.1.0 ou posterior para operações de Time Stamping Authority (TSA)
* Acesso público à Internet para verificação OCSP


O pacote de download inclui os seguintes arquivos:

[cols="50,50"]
|===


| Ficheiro | Descrição 


 a| 
`ONTAP-Mediator-production.pub`
 a| 
A chave pública usada para verificar a assinatura



 a| 
`csc-prod-chain-ONTAP-Mediator.pem`
 a| 
A cadeia de confiança da CA de certificação pública



 a| 
`csc-prod-ONTAP-Mediator.pem`
 a| 
O certificado usado para gerar a chave



 a| 
`ontap-mediator-1.11.0`
 a| 
O executável de instalação do produto para a versão 1.11



 a| 
`ontap-mediator-1.11.0.sig`
 a| 
O hash SHA-256 e depois o RSA-assinado usando a chave csc-prod, assinatura para o instalador



 a| 
`ontap-mediator-1.11.0.sig.tsr`
 a| 
A solicitação de revogação para uso pelo OCSCP para a assinatura do instalador



 a| 
`ontap-mediator-1.11.0.tsr`
 a| 
O arquivo de solicitação de assinatura de carimbo de data/hora



 a| 
`tsa-prod-ONTAP-Mediator.pem`
 a| 
O certificado público para o TSR



 a| 
`tsa-prod-chain-ONTAP-Mediator.pem`
 a| 
O certificado público CA Chain para o TSR

|===
.Passos
. Efetue a verificação de revogação `csc-prod-ONTAP-Mediator.pem` utilizando o OCSP (Online Certificate Status Protocol).
+
.. Encontre a URL OCSP do certificado.  Os certificados de desenvolvedor podem não fornecer um URI:
+
[listing]
----
openssl x509 -noout -ocsp_uri -in csc-prod-chain-ONTAP-Mediator.pem
----
.. Gerar uma solicitação OCSP para o certificado.
+
[listing]
----
openssl ocsp -issuer csc-prod-chain-ONTAP-Mediator.pem -CAfile csc-prod-chain-ONTAP-Mediator.pem -cert csc-prod-ONTAP-Mediator.pem  -reqout req.der
----
.. Conete-se ao Gerenciador OCSP para enviar a solicitação OCSP:
+
[listing]
----
openssl ocsp -issuer csc-prod-chain-ONTAP-Mediator.pem -CAfile csc-prod-chain-ONTAP-Mediator.pem -cert csc-prod-ONTAP-Mediator.pem  -url ${ocsp_uri} -resp_text -respout resp.der -verify_other csc-prod-chain-ONTAP-Mediator.pem
----


. Verifique a cadeia de confiança do CSC e as datas de expiração em relação ao host local:
+
`openssl verify`

+

NOTE: A `openssl` versão DO CAMINHO deve ter um válido `cert.pem` (não autoassinado).

+
[listing]
----
openssl verify -untrusted csc-prod-chain-ONTAP-Mediator.pem -CApath ${OPENSSLDIR} csc-prod-ONTAP-Mediator.pem  # Failure action: The Code-Signature-Check certificate has expired or is invalid. Download a newer version of the ONTAP Mediator.
openssl verify -untrusted tsa-prod-chain-ONTAP-Mediator.pem -CApath ${OPENSSLDIR} tsa-prod-ONTAP-Mediator.pem  # Failure action: The Time-Stamp certificate has expired or is invalid. Download a newer version of the ONTAP Mediator.
----
. Verifique o `ontap-mediator-1.11.0.sig.tsr` e `ontap-mediator-1.11.0.tsr` arquivos usando os certificados associados:
+
[role="tabbed-block"]
====
.OpenSSL 3.x
--
`openssl ts -verify -data ontap-mediator-1.11.0.sig -in ontap-mediator-1.11.0.sig.tsr -CAfile tsa-prod-chain-ONTAP-Mediator.pem -untrusted tsa-prod-ONTAP-Mediator.pem`

--
.OpenSSL 1.x
--
`openssl ts -verify -data ontap-mediator-1.11.0 -in ontap-mediator-1.11.0.tsr -CAfile tsa-prod-chain-ONTAP-Mediator.pem -partial_chain`

--
====
+

NOTE: `.tsr`Os arquivos contêm o registro de data e hora da resposta associada ao instalador e a assinatura do código.  O processamento confirma que o carimbo de data/hora possui uma assinatura válida da TSA e que seu arquivo de entrada não foi alterado.  Sua máquina realiza a verificação localmente.  Você não precisa acessar os servidores da TSA.

. Verifique assinaturas contra a chave:
+
`openssl -dgst -verify`

+
[listing]
----
openssl dgst -sha256 -verify ONTAP-Mediator-production.pub -signature ontap-mediator-1.11.0.sig ontap-mediator-1.11.0
----

