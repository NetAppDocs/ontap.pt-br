---
permalink: mediator/index.html 
sidebar: sidebar 
keywords: ontap mediator, install requirements, mediator requirements 
summary: Para instalar o ONTAP Mediator, você deve garantir que todos os pré-requisitos sejam atendidos, obter o pacote de instalação e executar o instalador no host. 
---
= Instalar ou atualizar o ONTAP Mediator
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Para instalar ou atualizar o ONTAP Mediator, você precisa atender a todos os pré-requisitos, baixar o pacote de instalação e executar o instalador no host.

* A partir do ONTAP 9.8, você pode usar qualquer versão do ONTAP Mediator para monitorar uma relação de sincronização ativa do SnapMirror.
* Você pode usar qualquer versão do ONTAP Mediator para monitorar uma configuração IP do MetroCluster .




== Considerações sobre instalação e atualização

Analise estes pontos antes de atualizar ou instalar o ONTAP Mediator.


NOTE: O ONTAP Mediator 1.8 e versões anteriores não são compatíveis com o modo FIPS do Red Hat Enterprise Linux (RHEL), o que impede sua instalação bem-sucedida.  Você pode verificar se o modo FIPS está ativado usando o `fips-mode-setup --check` comando.  Você pode desativar o modo FIPS usando o `fips-modesetup --disable` comando. Reinicie após desabilitar o modo FIPS para instalar com sucesso o ONTAP Mediator 1.8 ou anterior.

* Você deve atualizar o ONTAP Mediator para a versão mais recente.  As versões mais antigas ainda funcionam com todas as versões do ONTAP , mas as versões mais recentes incluem correções de segurança para componentes de terceiros.
* Quando você atualiza para uma nova versão do ONTAP Mediator, o instalador atualiza automaticamente para a versão SCST recomendada, a menos que uma versão superior esteja disponível. Para obter instruções sobre como instalar manualmente uma versão SCST mais alta, link:manage-task.html["Gerenciar o ONTAP Mediator"]consulte . Para versões suportadas, consulte link:whats-new-concept.html#scst-support-matrix["Matriz de suporte SCST"].


[NOTE]
====
* Se a instalação falhar, talvez seja necessário atualizar para uma versão mais recente do ONTAP Mediator.
* A partir de 15 de junho de 2025, você não poderá instalar ou atualizar o ONTAP Mediator 1.9 e 1.8 porque seus certificados de assinatura de código expiraram.  Se a instalação ou atualização falhar, use a versão de patch do ONTAP Mediator 1.9.1.


====
* Se você instalar o `yum-utils` pacote, você pode usar o `needs-restarting` comando.
* A partir da versão 1.11 do ONTAP Mediator, o IPv6 é suportado para configurações de IP do MetroCluster .




=== Requisitos de host

Siga estes requisitos ao instalar o RHEL ou o Rocky Linux e configurar os repositórios associados.

[NOTE]
====
Se você modificar o processo de instalação ou configuração, talvez seja necessário executar etapas adicionais.

====
.Requisitos de distribuição Linux
* Instale o RHEL ou o Rocky Linux seguindo as melhores práticas da Red Hat.  Como o CentOS 8.x chegou ao fim de seu ciclo de vida, versões compatíveis com o CentOS 8.x não são recomendadas.
* Ao instalar o ONTAP Mediator, certifique-se de que o sistema tenha acesso ao repositório necessário para que o programa de instalação possa recuperar e instalar todas as dependências de software necessárias.
* Para permitir que o instalador do yum encontre software dependente nos repositórios RHEL, Registre o sistema durante a instalação ou depois usando uma assinatura válida do Red Hat.
+
[NOTE]
====
Consulte a documentação do Red Hat Subscription Manager para obter mais informações.

====


.Requisitos de rede
Certifique-se de que as seguintes portas estão disponíveis e não utilizadas para o Mediador ONTAP:

|===


| Porta/serviços | Fonte | Direção | Destino | Finalidade 


 a| 
22/tcp
 a| 
Host de gerenciamento
 a| 
De entrada
 a| 
ONTAP Mediador
 a| 
(Opcional) Gerenciamento do mediador SSH / ONTAP



 a| 
31784/tcp
 a| 
LIFs de gerenciamento de clusters
 a| 
De entrada
 a| 
Servidor web ONTAP Mediator
 a| 
(OBRIGATÓRIO) API REST (HTTPS)



 a| 
3260/tcp 1
 a| 
LIFs de dados de nós ou LIFs de gerenciamento de nós
 a| 
Bidirecional
 a| 
ISCSI do Mediador ONTAP
 a| 
(Necessário para configurações de IP do MetroCluster ) Conexão de dados iSCSI para caixas de correio

|===
Para clientes SMBC, o ONTAP não requer que a porta 3260 seja ativada ou conetada.

* Se estiver usando um firewall de terceiros, consultelink:https://docs.netapp.com/us-en/ontap-metrocluster/install-ip/concept_mediator_requirements.html#firewall-requirements-for-ontap-mediator["Requisitos de firewall para o ONTAP Mediator"^] .
* Para hosts Linux sem acesso à Internet, certifique-se de que os pacotes necessários estejam disponíveis em um repositório local.
+
Se você estiver usando o Link Aggregation Control Protocol (LACP) em um ambiente Linux, configure o kernel e defina `sysctl net.ipv4.conf.all.arp_ignore` como `2`.



.Requisitos da OS
Seu sistema operacional precisa atender aos seguintes requisitos:

* instalação física de 64 bits ou máquina virtual
* 8 GB DE RAM
* 1 GB de espaço em disco (usado para instalação de aplicativos, logs de servidor e banco de dados)
* Usuário: Acesso root


A tabela a seguir mostra os SO suportados para cada versão do Mediador ONTAP.

[cols="30,70"]
|===


| ONTAP versão mediadora | Versões Linux suportadas 


 a| 
1,11
 a| 
* Red Hat Enterprise Linux
+
** Compatível: 9,5 ^1^
** Recomendado: 10.1, 10.0, 9.7, 9.6, 9.4 e 8.10


* Rocky Linux 10,1, 9.7 e 8,10
* Oracle Linux 10.0 e 9.6




 a| 
1,10
 a| 
* Red Hat Enterprise Linux
+
** Compatível: 9,5 ^1^
** Recomendado: 10.0, 9.6, 9.4 e 8,10


* Rocky Linux 10,0, 9.6 e 8,10




 a| 
1.9.1
 a| 
* Red Hat Enterprise Linux
+
** Compatível: 9.3, 9.1, 8.9, 8.7, 8.6, 8.5 e 8.4 ^1^
** Recomendado: 9,5, 9,4, 9,2, 9,0, 8,10 e 8,8


* Rocky Linux 9.5 e 8.10




 a| 
1,9
 a| 
* Red Hat Enterprise Linux
+
** Compatível: 9.3, 9.1, 8.9, 8.7, 8.6, 8.5 e 8.4 ^1^
** Recomendado: 9,5, 9,4, 9,2, 9,0, 8,10 e 8,8


* Rocky Linux 9.5 e 8.10




 a| 
1,8
 a| 
* Red Hat Enterprise Linux:
+
** Compatível: 8.7, 8.6, 8.5 e 8.4 ^1^
** Recomendado: 9.4, 9.3, 9.2, 9.1, 9.0, 8.10, 8.9 e 8.8


* Rocky Linux 9.4 e 8.10




 a| 
1,7
 a| 
* Red Hat Enterprise Linux:
+
** Compatível: 8.7, 8.6, 8.5 e 8.4 ^1^
** Recomendado: 9.3, 9.2, 9.1, 9.0, 8.9 e 8.8


* Rocky Linux 9.3 e 8.9




 a| 
1,6
 a| 
* Red Hat Enterprise Linux:
+
** Compatível: 8.7, 8.6, 8.5 e 8.4 ^1^
** Recomendado: 9.2, 9.1, 9.0 e 8,8


* Rocky Linux 9.2 e 8.8




 a| 
1,5
 a| 
* Red Hat Enterprise Linux: 8.5, 8.4, 8.3, 8.2, 8.1, 8.0, 7.9, 7.8, 7.7 e 7.6
* CentOS: 7.9, 7.8, 7.7 e 7.6




 a| 
1,4
 a| 
* Red Hat Enterprise Linux: 8.5, 8.4, 8.3, 8.2, 8.1, 8.0, 7.9, 7.8, 7.7 e 7.6
* CentOS: 7.9, 7.8, 7.7 e 7.6




 a| 
1,3
 a| 
* Red Hat Enterprise Linux: 8.3, 8.2, 8.1, 8.0, 7.9, 7.8, 7.7 e 7.6
* CentOS: 7.9, 7.8, 7.7 e 7.6




 a| 
1,2
 a| 
* Red Hat Enterprise Linux: 8.1, 8.0, 7.9, 7.8, 7.7 e 7.6
* CentOS: 7.9, 7.8, 7.7 e 7.6


|===
. Compatível significa que o Red Hat não oferece mais suporte a essas versões do RHEL, mas o ONTAP Mediator ainda pode ser instalado nelas.


.OS pacotes necessários
Os seguintes pacotes são exigidos pelo ONTAP Mediator:


NOTE: Os pacotes são pré-instalados ou instalados automaticamente pelo instalador do Mediador ONTAP.

[cols="25,25,25,25"]
|===


| Todas as versões RHEL/CentOS | Pacotes adicionais para RHEL 10.x / Rocky Linux 10 | Pacotes adicionais para RHEL 9.x / Rocky Linux 9 | Pacotes adicionais para RHEL 8.x / Rocky Linux 8 


 a| 
* openssl
* openssl-devel
* kernel-devel (uname -r)
* gcc
* marca
* libselinux-utils
* patch
* bzip2
* perl-Data-Dumper
* perl-ExtUtils-MakeMaker
* efibootmgr
* mokutil

 a| 
* python3.12
* python3.12-devel

 a| 
* elfutils-libelf-devel
* policycoreutils-python-utils
* python3
* python3-nível

 a| 
* elfutils-libelf-devel
* policycoreutils-python-utils
* redhat-lsb-core
* python39
* python39-nível


|===
O pacote de instalação Mediator é um arquivo tar compactado auto-extraível que inclui:

* Um arquivo RPM contendo todas as dependências que não podem ser obtidas do repositório da versão suportada.
* Um script de instalação.


Recomenda-se um certificado SSL válido.



=== Considerações de atualização DO SO e compatibilidade do kernel

* Você pode atualizar todos os pacotes de biblioteca, exceto o kernel, mas talvez seja necessário reiniciar o sistema para aplicar as alterações no ONTAP Mediator.  Programe um período de inatividade caso precise reiniciar.
* Você deve manter o kernel do sistema operacional atualizado.  Atualize o núcleo do kernel para uma versão compatível listada emlink:whats-new-concept.html#scst-support-matrix["Matriz de versão do Mediador ONTAP"] .  Você precisa reiniciar o sistema, portanto, planeje uma janela de manutenção para a interrupção.
+
** Desinstale o módulo do kernel SCST antes de reiniciar e reinstale-o em seguida.
** Prepare uma versão compatível do SCST para reinstalar antes de iniciar a atualização do kernel do sistema operacional.




[NOTE]
====
* A versão do kernel deve corresponder à versão do sistema operacional.
* Não atualize o kernel para uma versão do sistema operacional superior à suportada pela sua versão do ONTAP Mediator, pois o módulo SCST testado provavelmente não funcionará.


====


== Instale o ONTAP Mediator quando a Inicialização segura UEFI estiver ativada

O ONTAP Mediator pode ser instalado em um sistema com ou sem a Inicialização segura UEFI ativada.

.Sobre esta tarefa
Você pode optar por desativar a Inicialização segura UEFI antes de instalar o ONTAP Mediator se não for necessário ou se você estiver solucionando problemas de instalação do ONTAP Mediator. Desative a opção UEFI Secure Boot nas configurações da máquina.

[NOTE]
====
Para obter instruções detalhadas sobre como desabilitar o UEFI Secure Boot, consulte a documentação do sistema operacional do host.

====
Para instalar o ONTAP Mediator com o UEFI Secure Boot habilitado, você deve registrar uma chave de segurança antes que o serviço possa iniciar. A chave é gerada durante a etapa de compilação da instalação do SCST e salva como um par de chaves público-privado em sua máquina. Use o `mokutil` utilitário para adicionar a chave pública como uma chave de proprietário de máquina (MOK) ao firmware UEFI, permitindo que o sistema confie e carregue o módulo assinado. Salve a `mokutil` senha em um local seguro, pois isso é necessário ao reiniciar seu sistema para ativar o MOK.

.Passos
. [[STEP_1_uefi]]Verifique se o UEFI Secure Boot está ativado no seu sistema:
+
`mokutil --sb-state`

+
Os resultados indicam se o UEFI Secure Boot está ativado neste sistema.

+
[cols="40,60"]
|===


| Se... | Ir para... 


 a| 
A inicialização segura UEFI está ativada
 a| 




 a| 
A inicialização segura UEFI está desativada
 a| 
link:upgrade-host-os-mediator-task.html["Atualize o sistema operacional do host e, em seguida, o ONTAP Mediator"]

|===
+
[NOTE]
====
** Você é solicitado a criar uma senha que você deve armazenar em um local seguro. Você precisará dessa senha para ativar a chave no Gerenciador de Inicialização UEFI.
** O ONTAP Mediator 1.2.0 e versões anteriores não suportam este modo.


====
. [[step_2_uefi]]se o `mokutil` utilitário não estiver instalado, execute o seguinte comando:
+
`yum install mokutil`


